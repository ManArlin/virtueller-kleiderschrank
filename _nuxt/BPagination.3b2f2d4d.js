import{B as ee}from"./BvEvent.ebb941ad.js";import"./dom.08632105.js";import{n as V}from"./normalizeSlot.942441ce.js";import{t as w}from"./number.a61965f3.js";import{u as te}from"./useAlignment.38ba2855.js";import{u as E}from"./useBooleanish.b2afd79a.js";import"./useBreadcrumb.ef185003.js";import{d as le,v as b,j as o,r as ae,x as G,m as S}from"./entry.662d088a.js";const ie=5,I=20,X=0,s=3,ne="ellipsis-text",ue="first-text",se="last-text",oe="next-text",re="page",fe="prev-text",D=e=>Math.max(w(e)||I,1),F=e=>Math.max(w(e)||X,0),me=(e,r)=>{const d=w(e)||1;return d>r?r:d<1?1:d},Pe=le({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:"\u2026"},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:"\xAB"},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:"\xBB"},limit:{type:Number,default:ie},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:"\u203A"},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:I},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:"\u2039"},size:{type:String,required:!1},totalRows:{type:Number,default:X}},emits:["update:modelValue","page-click"],setup(e,{emit:r,slots:d}){const n=E(b(e,"disabled")),c=E(b(e,"firstNumber")),x=E(b(e,"hideEllipsis")),O=E(b(e,"hideGotoEndButtons")),f=E(b(e,"lastNumber")),$=E(b(e,"pills")),U=o(()=>e.align==="fill"?"start":e.align),j=te(b(U,"value")),i=o(()=>Math.ceil(F(e.totalRows)/D(e.perPage))),T=o(()=>{let t;return i.value-e.modelValue+2<e.limit&&e.limit>s?t=i.value-m.value+1:t=e.modelValue-Math.floor(m.value/2),t<1?t=1:t>i.value-m.value&&(t=i.value-m.value+1),e.limit<=s&&f.value&&i.value===t+m.value-1&&(t=Math.max(t-1,1)),t}),M=o(()=>{const t=i.value-e.modelValue;let l=!1;return t+2<e.limit&&e.limit>s?e.limit>s&&(l=!0):e.limit>s&&(l=!!(!x.value||c.value)),T.value<=1&&(l=!1),l&&c.value&&T.value<4&&(l=!1),l}),m=o(()=>{let t=e.limit;return i.value<=e.limit?t=i.value:e.modelValue<e.limit-1&&e.limit>s?((!x.value||f.value)&&(t=e.limit-(c.value?0:1)),t=Math.min(t,e.limit)):i.value-e.modelValue+2<e.limit&&e.limit>s?(!x.value||c.value)&&(t=e.limit-(f.value?0:1)):e.limit>s&&(t=e.limit-(x.value?0:2)),t}),q=o(()=>{const t=i.value-m.value;let l=!1;e.modelValue<e.limit-1&&e.limit>s?(!x.value||f.value)&&(l=!0):e.limit>s&&(l=!!(!x.value||f.value)),T.value>t&&(l=!1);const y=T.value+m.value-1;return l&&f.value&&y>i.value-3&&(l=!1),l}),H=ae({pageSize:D(e.perPage),totalRows:F(e.totalRows),numberOfPages:i.value}),R=(t,l)=>{if(l===e.modelValue)return;const{target:y}=t,P=new ee("page-click",{cancelable:!0,target:y});r("page-click",P,l),!P.defaultPrevented&&r("update:modelValue",l)},W=o(()=>e.size?`pagination-${e.size}`:""),J=o(()=>$.value?"b-pagination-pills":"");G(()=>e.modelValue,t=>{const l=me(t,i.value);l!==e.modelValue&&r("update:modelValue",l)}),G(H,(t,l)=>{t!=null&&(l.pageSize!==t.pageSize&&l.totalRows===t.totalRows||l.numberOfPages!==t.numberOfPages&&e.modelValue>l.numberOfPages)&&r("update:modelValue",1)});const k=o(()=>{const t=[];for(let l=0;l<m.value;l++)t.push({number:T.value+l,classes:null});return t});return()=>{const t=[],l=k.value.map(a=>a.number),y=a=>a===e.modelValue,P=e.modelValue<1,v=e.align==="fill",L=(a,h,g,A,C,N)=>{const u=n.value||y(N)||P||a<1||a>i.value,B=a<1?1:a>i.value?i.value:a,Y={disabled:u,page:B,index:B-1},Z=V(g,Y,d)||A||"";return S("li",{class:["page-item",{disabled:u,"flex-fill":v,"d-flex":v&&!u},C]},S(u?"span":"button",{class:["page-link",{"flex-grow-1":!u&&v}],"aria-label":h,"aria-controls":e.ariaControls||null,"aria-disabled":u?"true":null,role:"menuitem",type:u?null:"button",tabindex:u?null:"-1",onClick:p=>{u||R(p,B)}},Z))},z=a=>S("li",{class:["page-item","disabled","bv-d-xs-down-none",v?"flex-fill":"",e.ellipsisClass],role:"separator",key:`ellipsis-${a?"last":"first"}`},[S("span",{class:["page-link"]},V(ne,{},d)||e.ellipsisText||"...")]),_=(a,h)=>{const g=y(a.number)&&!P,A=n.value?null:g||P&&h===0?"0":"-1",C={active:g,disabled:n.value,page:a.number,index:a.number-1,content:a.number},N=V(re,C,d)||a.number,u=S(n.value?"span":"button",{class:["page-link",{"flex-grow-1":!n.value&&v}],"aria-controls":e.ariaControls||null,"aria-disabled":n.value?"true":null,"aria-label":e.labelPage?`${e.labelPage} ${a.number}`:null,role:"menuitemradio",type:n.value?null:"button",tabindex:A,onClick:B=>{n.value||R(B,a.number)}},N);return S("li",{class:["page-item",{disabled:n.value,active:g,"flex-fill":v,"d-flex":v&&!n.value},e.pageClass],role:"presentation",key:`page-${a.number}`},u)};if(!O.value&&!c.value){const a=L(1,e.labelFirstPage,ue,e.firstText,e.firstClass,1);t.push(a)}const K=L(e.modelValue-1,e.labelFirstPage,fe,e.prevText,e.prevClass,1);t.push(K),c.value&&l[0]!==1&&t.push(_({number:1},0)),M.value&&t.push(z(!1)),k.value.forEach((a,h)=>{const g=M.value&&c.value&&l[0]!==1?1:0;t.push(_(a,h+g))}),q.value&&t.push(z(!0)),f.value&&l[l.length-1]!==i.value&&t.push(_({number:i.value},-1));const Q=L(e.modelValue+1,e.labelNextPage,oe,e.nextText,e.nextClass,i.value);if(t.push(Q),!f.value&&!O.value){const a=L(i.value,e.labelLastPage,se,e.lastText,e.lastClass,i.value);t.push(a)}return S("ul",{class:["pagination",W.value,j.value,J.value],role:"menubar","aria-disabled":n.value,"aria-label":e.ariaLabel||null},t)}}});export{Pe as default};
