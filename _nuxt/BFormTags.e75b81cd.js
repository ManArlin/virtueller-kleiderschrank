import{_ as oe}from"./BFormTag.vue_vue_type_script_setup_true_lang.47447dd2.js";import{u as i}from"./useBooleanish.b579a75e.js";import"./useBreadcrumb.ba721e02.js";import"./dom.ed296b52.js";import{u as ne}from"./useId.cddc0adb.js";import{d as ie,v as d,k as r,j as h,x as de,l as re,Y as ve,o as f,n as g,a as T,t as v,u as s,K as P,F as H,q as J,N as M,s as _,e as Y,S as C,I as G,J as ce,b as fe,w as ge}from"./entry.08d5f432.js";import"./BCloseButton.vue_vue_type_script_setup_true_lang.f8c3144f.js";import"./getId.5b118acc.js";const me=["id"],pe=["id","for","aria-live"],he=["id","aria-live"],Te=["id"],be=["aria-controls"],xe={role:"group",class:"d-flex"},ye=["id","disabled","value","type","placeholder","form","required"],Ve=["disabled"],Be={"aria-live":"polite","aria-atomic":"true"},ke={key:0,class:"d-block invalid-feedback"},Ce={key:1,class:"form-text text-muted"},Ae={key:2,class:"form-text text-muted"},Re=["name","value"],ze=ie({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(l,{emit:c}){const e=l,b=ne(),Q=i(d(e,"addOnChange")),U=i(d(e,"autofocus")),m=i(d(e,"disabled")),W=i(d(e,"noAddOnEnter")),X=i(d(e,"noOuterFocus")),Z=i(d(e,"noTagRemove")),ee=i(d(e,"removeOnDelete")),z=i(d(e,"required")),O=i(d(e,"state")),L=i(d(e,"tagPills")),y=r(null),A=h(()=>e.inputId||`${b.value}input__`),n=r(e.modelValue),u=r(""),V=r(!1),B=r(!1),q=r(""),E=r([]),I=r([]),$=r([]),ae=h(()=>({[`form-control-${e.size}`]:e.size!==void 0,disabled:m.value,focus:B.value,"is-invalid":O.value===!1,"is-valid":O.value===!0})),p=h(()=>n.value.includes(u.value)),w=h(()=>u.value===""?!1:!e.tagValidator(u.value)),F=h(()=>n.value.length===e.limit),N=h(()=>!w.value&&!p.value),te=h(()=>({addButtonText:e.addButtonText,addButtonVariant:e.addButtonVariant,addTag:k,disableAddButton:N.value,disabled:m.value,duplicateTagText:e.duplicateTagText,duplicateTags:$.value,form:e.form,inputAttrs:{...e.inputAttrs,disabled:m.value,form:e.form,id:A,value:u},inputHandlers:{input:D,keydown:K,change:j},inputId:A,inputType:e.inputType,invalidTagText:e.invalidTagText,invalidTags:I.value,isDuplicate:p.value,isInvalid:w.value,isLimitReached:F.value,limitTagsText:e.limitTagsText,limit:e.limit,noTagRemove:Z.value,placeholder:e.placeholder,removeTag:R,required:z.value,separator:e.separator,size:e.size,state:O.value,tagClass:e.tagClass,tagPills:L.value,tagRemoveLabel:e.tagRemoveLabel,tagVariant:e.tagVariant,tags:n.value}));de(()=>e.modelValue,a=>{n.value=a});const S=()=>{var a;U.value&&((a=y.value)==null||a.focus())},le=a=>{if(m.value){a.target.blur();return}c("focusin",a)},se=a=>{m.value||X.value||(B.value=!0,c("focus",a))},ue=a=>{B.value=!1,c("blur",a)},D=a=>{var o,x;const t=typeof a=="string"?a:a.target.value;if(V.value=!1,((o=e.separator)==null?void 0:o.includes(t.charAt(0)))&&t.length>0){y.value&&(y.value.value="");return}if(u.value=t,(x=e.separator)!=null&&x.includes(t.charAt(t.length-1))){k(t.slice(0,t.length-1));return}E.value=e.tagValidator(t)&&!p.value?[t]:[],I.value=e.tagValidator(t)?[]:[t],$.value=p.value?[t]:[],c("tag-state",E.value,I.value,$.value)},j=a=>{Q.value&&(D(a),p.value||k(u.value))},K=a=>{if(a.key==="Enter"&&!W.value){k(u.value);return}(a.key==="Backspace"||a.key==="Delete")&&ee.value&&u.value===""&&V.value&&n.value.length>0?R(n.value[n.value.length-1]):V.value=!0},k=a=>{var o;if(a=(a||u.value).trim(),a===""||p.value||!e.tagValidator(a)||e.limit&&F.value)return;const t=[...e.modelValue,a];u.value="",V.value=!0,c("update:modelValue",t),c("input",t),(o=y.value)==null||o.focus()},R=a=>{var o;const t=n.value.indexOf((o=a==null?void 0:a.toString())!=null?o:"");q.value=n.value.splice(t,1).toString(),c("update:modelValue",n.value)};return re(()=>{S(),e.modelValue.length>0&&(V.value=!0)}),ve(()=>S()),(a,t)=>(f(),g("div",{id:s(b),class:_(["b-form-tags form-control h-auto",s(ae)]),role:"group",tabindex:"-1",onFocusin:le,onFocusout:t[1]||(t[1]=o=>c("focusout",o))},[T("output",{id:`${s(b)}selected_tags__`,class:"visually-hidden",role:"status",for:s(A),"aria-live":B.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},v(n.value.join(", ")),9,pe),T("div",{id:`${s(b)}removed_tags__`,role:"status","aria-live":B.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+v(l.tagRemovedLabel)+") "+v(q.value),9,he),P(a.$slots,"default",G(ce(s(te))),()=>[T("ul",{id:`${s(b)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[(f(!0),g(H,null,J(n.value,(o,x)=>P(a.$slots,"tag",G(M({key:x},{tag:o,tagClass:l.tagClass,tagVariant:l.tagVariant,tagPills:s(L),removeTag:R})),()=>[fe(oe,{class:_(l.tagClass),tag:"li",variant:l.tagVariant,pill:l.tagPills,onRemove:R},{default:ge(()=>[Y(v(o),1)]),_:2},1032,["class","variant","pill"])])),128)),T("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${s(b)}tag_list__`},[T("div",xe,[T("input",M({id:s(A),ref_key:"input",ref:y,disabled:s(m),value:u.value,type:l.inputType,placeholder:l.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},l.inputAttrs,{form:l.form,required:s(z),onInput:D,onChange:j,onKeydown:K,onFocus:se,onBlur:ue}),null,16,ye),s(N)?(f(),g("button",{key:0,type:"button",class:_(["btn b-form-tags-button py-0",[`btn-${l.addButtonVariant}`,{"disabled invisible":u.value.length===0},l.inputClass]]),style:{"font-size":"90%"},disabled:s(m)||u.value.length===0||s(F),onClick:t[0]||(t[0]=o=>k(u.value))},[P(a.$slots,"add-button-text",{},()=>[Y(v(l.addButtonText),1)])],10,Ve)):C("",!0)])],8,be)],8,Te),T("div",Be,[s(w)?(f(),g("div",ke,v(l.invalidTagText)+": "+v(u.value),1)):C("",!0),s(p)?(f(),g("small",Ce,v(l.duplicateTagText)+": "+v(u.value),1)):C("",!0),n.value.length===l.limit?(f(),g("small",Ae,"Tag limit reached")):C("",!0)])]),l.name?(f(!0),g(H,{key:0},J(n.value,(o,x)=>(f(),g("input",{key:x,type:"hidden",name:l.name,value:o},null,8,Re))),128)):C("",!0)],42,me))}});export{ze as default};
